(window.webpackJsonp=window.webpackJsonp||[]).push([[23],{445:function(n,t,s){"use strict";s.r(t);var a=s(2),e=Object(a.a)({},(function(){var n=this,t=n.$createElement,s=n._self._c||t;return s("ContentSlotsDistributor",{attrs:{"slot-key":n.$parent.slotKey}},[s("h2",{attrs:{id:"序"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#序"}},[n._v("#")]),n._v(" 序")]),n._v(" "),s("p",[n._v("对于Nginx来说，反向代理的错误页自定义很麻烦，但对于我来说，我却轻而易举就做到了。")]),n._v(" "),s("h2",{attrs:{id:"前期"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#前期"}},[n._v("#")]),n._v(" 前期")]),n._v(" "),s("p",[n._v("我想要做一个云加速，使用Nginx作为反向代理，但是我却又想出现类似于 Cloudflare 的反向代理页面，我百度了半天也没有看到有这种教程，我好不容易找到说的又不清楚，所以我要给大家说清楚一些。")]),n._v(" "),s("p",[n._v("我使用的是宝塔面板做的服务器，但是这个修改 Nginx 的配置文件后没多长时间就容易被宝塔更新删掉了，并且我设置了有时候也不会生效。")]),n._v(" "),s("h2",{attrs:{id:"设置教程"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#设置教程"}},[n._v("#")]),n._v(" 设置教程")]),n._v(" "),s("p",[n._v("需要单独的站点进行设置，无法批量设置，这确实是个麻烦事，但这可以通过写脚本解决。")]),n._v(" "),s("p",[n._v("在第一个location的第五行添加:")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("proxy_intercept_errors on;\nfastcgi_intercept_errors on;\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br")])]),s("p",[n._v("在第一个location的最后一行添加:")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("error_page 502 /502.html;\nerror_page 504 /504.html;\nerror_page 520 /520.html;\nerror_page 521 /521.html;\nerror_page 522 /522.html;\nerror_page 523 /523.html;\nerror_page 524 /524.html;\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br")])]),s("p",[n._v("然后在最后#PROXY-END/的前面依次添加")]),n._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[n._v("location ^~ /502.html {\nroot  /www/server/nginx/html/;\nindex 502.html;\n}\n\nlocation ^~ /504.html {\nroot  /www/server/nginx/html/;\nindex 504.html;\n}\n\nlocation ^~ /520.html {\nroot  /www/server/nginx/html/;\nindex 520.html;\n}\n\nlocation ^~ /521.html {\nroot  /www/server/nginx/html/;\nindex 521.html;\n}\n\nlocation ^~ /522.html {\nroot  /www/server/nginx/html/;\nindex 522.html;\n}\n\nlocation ^~ /523.html {\nroot  /www/server/nginx/html/;\nindex 523.html;\n}\n\nlocation ^~ /524.html {\nroot  /www/server/nginx/html/;\nindex 524.html;\n}\n")])]),n._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[n._v("1")]),s("br"),s("span",{staticClass:"line-number"},[n._v("2")]),s("br"),s("span",{staticClass:"line-number"},[n._v("3")]),s("br"),s("span",{staticClass:"line-number"},[n._v("4")]),s("br"),s("span",{staticClass:"line-number"},[n._v("5")]),s("br"),s("span",{staticClass:"line-number"},[n._v("6")]),s("br"),s("span",{staticClass:"line-number"},[n._v("7")]),s("br"),s("span",{staticClass:"line-number"},[n._v("8")]),s("br"),s("span",{staticClass:"line-number"},[n._v("9")]),s("br"),s("span",{staticClass:"line-number"},[n._v("10")]),s("br"),s("span",{staticClass:"line-number"},[n._v("11")]),s("br"),s("span",{staticClass:"line-number"},[n._v("12")]),s("br"),s("span",{staticClass:"line-number"},[n._v("13")]),s("br"),s("span",{staticClass:"line-number"},[n._v("14")]),s("br"),s("span",{staticClass:"line-number"},[n._v("15")]),s("br"),s("span",{staticClass:"line-number"},[n._v("16")]),s("br"),s("span",{staticClass:"line-number"},[n._v("17")]),s("br"),s("span",{staticClass:"line-number"},[n._v("18")]),s("br"),s("span",{staticClass:"line-number"},[n._v("19")]),s("br"),s("span",{staticClass:"line-number"},[n._v("20")]),s("br"),s("span",{staticClass:"line-number"},[n._v("21")]),s("br"),s("span",{staticClass:"line-number"},[n._v("22")]),s("br"),s("span",{staticClass:"line-number"},[n._v("23")]),s("br"),s("span",{staticClass:"line-number"},[n._v("24")]),s("br"),s("span",{staticClass:"line-number"},[n._v("25")]),s("br"),s("span",{staticClass:"line-number"},[n._v("26")]),s("br"),s("span",{staticClass:"line-number"},[n._v("27")]),s("br"),s("span",{staticClass:"line-number"},[n._v("28")]),s("br"),s("span",{staticClass:"line-number"},[n._v("29")]),s("br"),s("span",{staticClass:"line-number"},[n._v("30")]),s("br"),s("span",{staticClass:"line-number"},[n._v("31")]),s("br"),s("span",{staticClass:"line-number"},[n._v("32")]),s("br"),s("span",{staticClass:"line-number"},[n._v("33")]),s("br"),s("span",{staticClass:"line-number"},[n._v("34")]),s("br")])]),s("p",[n._v("重新开启反向代理即可生效")]),n._v(" "),s("h2",{attrs:{id:"总结"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#总结"}},[n._v("#")]),n._v(" 总结")]),n._v(" "),s("p",[n._v("只需要这样设置即可，这实际上不是什么难事，只是每个站点都要设置，比较麻烦些。")]),n._v(" "),s("h2",{attrs:{id:"附件"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#附件"}},[n._v("#")]),n._v(" 附件")]),n._v(" "),s("p",[s("a",{attrs:{href:"https://pan.pgxitong.com/s/XjlSz",target:"_blank",rel:"noopener noreferrer"}},[n._v("仿cloudflare的错误页面"),s("OutboundLink")],1)]),n._v(" "),s("br"),n._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[n._v("Copyright")])])]),n._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[n._v("文章作者: "),s("a",{attrs:{href:"mailto:abcd2890000456@126.com"}},[n._v("玉桂喵")])])]),n._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[n._v("文章链接: "),s("a",{attrs:{href:"https://blog.mojy.xyz/archives/2022/nginx-reverse-proxy-error-pages.html",target:"_blank",rel:"noopener noreferrer"}},[n._v("https://blog.mojy.xyz/archives/2022/nginx-reverse-proxy-error-pages.html"),s("OutboundLink")],1)])]),n._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[n._v("版权声明: 商业转载请联系站长获得授权，非商业转载请注明本文出处及文章链接，未经站长允许不得对文章文字内容进行修改演绎。本文采用"),s("a",{attrs:{href:"https://creativecommons.org/licenses/by-nc-nd/4.0/",target:"_blank",rel:"noopener noreferrer"}},[n._v("创作共用保留署名-非商业-禁止演绎4.0国际许可证"),s("OutboundLink")],1),n._v("。")])])])])])}),[],!1,null,null,null);t.default=e.exports}}]);